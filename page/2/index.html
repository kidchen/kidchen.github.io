<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>kidChen</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="Chen Zhang's personal website">



<meta name="keywords" content="kidChen">



    <meta name="description" content="Chen Zhang&#39;s personal website">
<meta property="og:type" content="website">
<meta property="og:title" content="kidChen">
<meta property="og:url" content="http://kidchen.github.com/page/2/">
<meta property="og:site_name" content="kidChen">
<meta property="og:description" content="Chen Zhang&#39;s personal website">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Chen Zhang">
<meta property="article:tag" content="kidChen">
<meta name="twitter:card" content="summary">





<link rel="icon" href="/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-57180261-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-57180261-1');
</script>


    


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/">Home</a>
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories">Categories</a>
            
            <a class="navbar-item "
               href="/tags">Tags</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2016/03/09/tech160309-docker/" itemprop="url">Memory Leak in Docker Container</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2016-03-10T04:40:33.000Z" itemprop="datePublished">Mar 9 2016</time>
                <span class="second-date-block"> (Mar 9 2016)</span>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/English/">English</a><span>></span><a class="article-category-link" href="/categories/English/Technology/">Technology</a><span>></span><a class="article-category-link" href="/categories/English/Technology/Docker/">Docker</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            3 minutes read (About 476 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>Since we recently start using <a target="_blank" rel="noopener" href="https://docs.docker.com/">docker</a> for product release, I’m dealing with a lot of problems related with docker. One of the headache is sometimes, the running application performs different in docker containers with the one directly runs in local without docker. For me, a more specific example is my webApp, running in gradle with Jetty9 plugins, can finish our load test perfectly only on my ubuntu machine. But it will get memory leak error when runs in docker container. So I decided to look into it by Java profiler.</p>
<p>It’s quite easy to use a GUI profiler to monitor the whole process how an application uses CPU and memory during running time. But it’s a little complicated to attach it in a container. Firstly I tried to use <a target="_blank" rel="noopener" href="https://www.yourkit.com/docs/java/help/remote_profiling.jsp">YourKit</a> by its remote profiling option. The basic steps are:</p>
<ol>
<li>Modify <code>Dockerfile</code> to get YourKit installed.<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update</span><br><span class="line">RUN apt-get install -y wget</span><br><span class="line">RUN wget https://www.yourkit.com/download/yjp-2016.02-b29-linux.tar.bz2</span><br><span class="line">RUN tar xfj yjp-2016.02-b29-linux.tar.bz2</span><br><span class="line"></span><br><span class="line"><span class="hljs-string">"-agentpath:/usr/share/jetty/yjp-2016.02/bin/linux-x86-64/libyjpagent.so=disablestacktelemetry,disableexceptiontelemetry,delay=10000,sessionname=Jetty"</span>, \</span><br><span class="line"></span><br><span class="line">EXPOSE 10001</span><br></pre></td></tr></tbody></table></figure></li>
<li>After building the image, access into the docker container and attach to JVM:<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="hljs-built_in">exec</span> -i -t &lt;containerID&gt; /bin/bash</span><br><span class="line">&lt;directory with unpacked content&gt;/bin/yjp.sh -attach </span><br></pre></td></tr></tbody></table></figure></li>
<li>In YourKit GUI, link to the host:port.<br>But every time when I try to attach to JVM (step 2), I get error below:<figure class="highlight java hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">com.sun.tools.attach.AttachNotSupportedException:</span><br><span class="line">   Unable to open socket file:</span><br><span class="line">      target process not responding or HotSpot VM not loaded.</span><br></pre></td></tr></tbody></table></figure>
It should be solved by just switching to the user created the container. But it didn’t work. So I tried to use <a target="_blank" rel="noopener" href="https://www.ej-technologies.com/download/jprofiler/files">JProfiler</a>.<br>Here are the steps:</li>
<li>Modify the <code>Dockerfile</code> to get JProfiler installed:<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RUN \</span><br><span class="line">  apt-get update &amp;&amp; \</span><br><span class="line">  apt-get install -y wget &amp;&amp; \</span><br><span class="line">  wget http://download-keycdn.ej-technologies.com/jprofiler/jprofiler_linux_9_1_1.tar.gz &amp;&amp; \</span><br><span class="line">  tar -xzf jprofiler_linux_9_1_1.tar.gz -C /usr/<span class="hljs-built_in">local</span></span><br><span class="line"></span><br><span class="line">ENV JPAGENT_PATH=<span class="hljs-string">"-agentpath:/usr/local/jprofiler9/bin/linux-x64/libjprofilerti.so=nowait"</span></span><br><span class="line">EXPOSE 8849</span><br></pre></td></tr></tbody></table></figure>
Be careful of the version. The one installed in docker container should be the same version as the one you use to monitor.</li>
<li>Execute the command in docker container:<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="hljs-built_in">exec</span> -i -t &lt;containerID&gt; /bin/bash</span><br><span class="line">/usr/<span class="hljs-built_in">local</span>/jprofiler9/bin/jpenable</span><br></pre></td></tr></tbody></table></figure>
That’s it. Now we can link to the remote from anywhere by host:port. The default port is 8849.</li>
</ol>
<p>But the sad story is after looking into the result of the profiler, I still don’t know how it got memory leaked. <a target="_blank" rel="noopener" href="https://github.com/docker/docker/issues/15020">Here</a> is a discussion about the similar docker problem, maybe I’m not the only one.<br>I’ll update once I figured out…</p>
</body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2015/04/30/Update_hexo_v3_150430/" itemprop="url">Update Hexo 3.0</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2015-04-30T07:13:38.000Z" itemprop="datePublished">Apr 30 2015</time>
                <span class="second-date-block"> (Apr 30 2015)</span>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/English/">English</a><span>></span><a class="article-category-link" href="/categories/English/Technology/">Technology</a><span>></span><a class="article-category-link" href="/categories/English/Technology/Hexo/">Hexo</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            4 minutes read (About 589 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>Spend a whole night working on updating Hexo. It is much more complicated than I expected. For anyone’s convenience, I record some key points when migrate from Hexo 2.x to 3.0 besides the <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/wiki/Migrating-from-2.x-to-3.0">official documentation</a>.</p>
<h2 id="First-things-first-uninstall-Hexo"><a href="#First-things-first-uninstall-Hexo" class="headerlink" title="First things first: uninstall Hexo"></a>First things first: uninstall Hexo</h2><p>Yes. Though the official wiki says that we can directly migrate from 2.x to 3.0, this doesn’t work (to me). Besides, instead of wasting time figuring out what’s wrong when updating, re-installating and configurating Hexo 3.0 seems acceptable to me. You can try to update directly but I didn’t do that successfully.<br>Before your uninstallation, backup your posts and any other custom setting files (eg. <code>_config.yml</code>, your own theme file, etc).<br>To uninstall Hexo, use the node package manager(npm):</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo </span><br></pre></td></tr></tbody></table></figure>

<h2 id="Now-install-Hexo-3-0"><a href="#Now-install-Hexo-3-0" class="headerlink" title="Now, install Hexo 3.0"></a>Now, install Hexo 3.0</h2><p>Run</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install -g hexo-cli</span><br></pre></td></tr></tbody></table></figure>
<p><a target="_blank" rel="noopener" href="http://hexo.io/docs/">Hexo wiki</a> doesn’t mention the administration permission, but in my experience we have to add <code>sudo</code> here.</p>
<p>Then we need to setup hexo folder in your desired place(folder).</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="hljs-built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ sudo npm install</span><br></pre></td></tr></tbody></table></figure>
<p>Still, try <code>sudo</code> when you fail to run any command.</p>
<p>For your future convenience, we install all necessary services here:</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br></pre></td></tr></tbody></table></figure>
<p>and any plugins you probably need:</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-marked@0.2 --save</span><br><span class="line">npm install hexo-renderer-stylus@0.2 --save</span><br><span class="line">npm install hexo-generator-feed@1 --save</span><br><span class="line">npm install hexo-generator-sitemap@1 --save</span><br></pre></td></tr></tbody></table></figure>
<p>All in sudo mode (or you can directly do all of these in <code>sudo -i</code> mode).<br>Now, we finished installation. </p></body></html>
        <p class="article-more-link">
            <a href="/2015/04/30/Update_hexo_v3_150430/#more">Read More</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2015/03/18/Tech150318_encode/" itemprop="url">Character Encoding - ASCII, Unicode &amp; UTF-8</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2015-03-18T08:58:11.000Z" itemprop="datePublished">Mar 18 2015</time>
                <span class="second-date-block"> (Mar 18 2015)</span>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/English/">English</a><span>></span><a class="article-category-link" href="/categories/English/Technology/">Technology</a><span>></span><a class="article-category-link" href="/categories/English/Technology/Language-Processing/">Language Processing</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            4 minutes read (About 647 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><h3 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h3><p>Single byte encoding only using the bottom 7 bits(0-127). The top bit is always 0.<br><img src="/images/ASCII.png" title="ASCII Chart"><br>In English, 128 symbols are enough to represent all character. But in other situations, French for example, they are insufficient. So we use the top bit to represent accents so that there are up to 256 characters. ‘é’ encodes as 1000 0010(130).<br>But here comes another problem. In different languages, the same binary encoding represents different characters, such as 130 in French is é, but in Hebrew, it is Gimel(ג). Not to mention Chinese characters(more than 100 thousand). So we introduce another encoding system, unicode.</p>
<h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p>“Unicode encoding” is more properly known as UTF-16: 2 bytes per “code point”. This is the native format of strings in .NET. Values outside the Basic Multilingual Plane(BMP) are encoded as surrogate pairs. These are relatively rarely used - which is a good job, as very few developers get them right, I suspect. “Unicode” is really the character set - it is unfortunate that the term is also used as a synonym for UTF-16 in .NET and various Windows applications.<br>Unicode can be implemented by different character encodings. The most commonly used encodings are UTF-8, UTF-7 and UTF-32:<br><strong>UTF-8</strong>: <em>Variable length encoding</em>, 1-4 bytes covers every current character. ASCII values are encoded as ASCII.<br><strong>UTF-7</strong>: Usually used for mail encoding. Chances are if you think you need it and you’re not doing mail, you’re wrong. (not widely used at all.)<br><strong>UTF-32</strong>: Fixed width encoding using 4 bytes per code point. This isn’t very efficient, but makes life easier outside the BMP.</p>
<h3 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h3><p>UTF-8 has become the dominant character encoding for the World Wide Web. The rule of UTF-8 is:<br>(1) If this is in ASCII, UTF-8 is the same with ASCII<br>(2) For n UTF bytes(n &gt; 1), the first n bits in the first byte set as 1, the n + 1 bit sets as 0, all the first two bits in the following bytes are all 10. The rest of the bits are represented as the unicode of the character.</p>
<table>
<thead>
<tr>
<th>UTF Bytes</th>
<th>Hexadecimal</th>
<th>Binary</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0000 0000 to 0000 007F</td>
<td>0xxxxxxx</td>
</tr>
<tr>
<td>2</td>
<td>0000 0080 to 0000 07FF</td>
<td>110xxxxx 10xxxxxx</td>
</tr>
<tr>
<td>3</td>
<td>0000 0800 to 0000 FFFF</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
</tr>
<tr>
<td>4</td>
<td>0001 0000 to 0010 FFFF</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
</tr>
</tbody></table>
<p>For example, the unicode of “严” is 4E25 (100111000100101). According to the table above, this character belongs to the third row. So its UTF-8 is E4B8A5 (11100100 10111000 10100101).<br>We can see that actually unicode is different with UTF-8. But there are some libraries that can do the convert.</p></body></html>
        <p class="article-more-link">
            <a href="/2015/03/18/Tech150318_encode/#more">Read More</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2015/02/08/InterviewNote8Questions/" itemprop="url">Interview Note - Examples</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2015-02-09T07:38:30.000Z" itemprop="datePublished">Feb 8 2015</time>
                <span class="second-date-block"> (Feb 8 2015)</span>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/English/">English</a><span>></span><a class="article-category-link" href="/categories/English/Interview/">Interview</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            6 minutes read (About 879 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h3 id="Single-Number"><a href="#Single-Number" class="headerlink" title="Single Number"></a>Single Number</h3><p><strong>XOR</strong> features:<br>a ^ b = c<br>a ^ c = b<br>b ^ c = a<br>a ^ 0 = a<br>a ^ a = 0<br>(a ^ b) ^ c = a ^ (b ^ c)</p>
<ul>
<li>I: all the numbers appear twice except one<br>XOR all the numbers, and the result is the one</li>
<li>II: all the numbers appear three times except one<br>Use a <code>int[32]</code> to store each bit, if the number of this bit can be mod by 3, we set it as 0, otherwise we set it as 1.</li>
<li>III: all the numbers appear twice except two<br>XOR all the numbers so we can get the <code>two</code> by XOR. Since these two elements are not the same, there is at least one bit that different. We find this <code>different</code> position and XOR all the elements which have 1 on position <code>different</code>, the result is one of the two. Finally, we XOR the found one with XOR-ed <code>two</code>, we can get another one.</li>
</ul>
<h3 id="Majority-Number"><a href="#Majority-Number" class="headerlink" title="Majority Number"></a>Majority Number</h3><ul>
<li>I: find the number appears more than half<br>Since it is a <em>strict</em> majority number, we only need to maintain a variable <code>result</code> and a <code>counter</code>. Initially, when the <code>counter</code> faces with a different number, minus one of counter and change the <code>result</code> to this new number, otherwise we only need to add 1 to the <code>counter</code>. And finally, the <code>result</code> we maintained is the result. (We need to do another pass to make sure this number is the one we are looking for)</li>
<li>II: find the number appears more than 1/3<br>Similar with I, we maintain two variables and two counters so that we can get most appeared two numbers. And then we put these two numbers back to the array to find out which one appears more than 1/3. (We can’t use counter to find out, because counters have minus operation during the traversal)</li>
<li>III: find the number appears more than 1/k<br>We maintain a <code>HashMap&lt;number, counter&gt;</code>. Since if majority, each k different numbers should have more than one element. When we get k entries in the map, we remove entries which values are 1. Finally, find the entry that have highest value(count), that key should be the majority number. In this way, we can implement this in <code>O(n)</code> time and <code>O(k)</code> extra space.<figure class="highlight java hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">majorityNumber</span><span class="hljs-params">(ArrayList&lt;Integer&gt; nums, <span class="hljs-keyword">int</span> k)</span> </span>{</span><br><span class="line">        <span class="hljs-keyword">if</span>(nums == <span class="hljs-keyword">null</span> || nums.size() == <span class="hljs-number">0</span>) {</span><br><span class="line">            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        HashMap&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> num : nums) {</span><br><span class="line">            <span class="hljs-keyword">if</span>(map.containsKey(num)) {</span><br><span class="line">                map.put(num, map.get(num) + <span class="hljs-number">1</span>);</span><br><span class="line">            } <span class="hljs-keyword">else</span> {</span><br><span class="line">                <span class="hljs-comment">// if there are k entries, check if there are any entries that</span></span><br><span class="line">                <span class="hljs-comment">// its value == 1, that is not satisfied with "more than 1/k"</span></span><br><span class="line">                <span class="hljs-keyword">if</span>(map.size() == k) {</span><br><span class="line">                    Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; iter = map.entrySet().iterator();</span><br><span class="line">                    <span class="hljs-keyword">while</span>(iter.hasNext()) {</span><br><span class="line">                        Map.Entry&lt;Integer, Integer&gt; entry = iter.next();</span><br><span class="line">                        <span class="hljs-keyword">if</span>(entry.getValue() - <span class="hljs-number">1</span> == <span class="hljs-number">0</span>) {</span><br><span class="line">                            <span class="hljs-comment">// can't use: map.remove(entry.getKey());</span></span><br><span class="line">                            <span class="hljs-comment">// above wrong code would lead the iter can't find its next !!!</span></span><br><span class="line">                            iter.remove();</span><br><span class="line">                        } <span class="hljs-keyword">else</span> {</span><br><span class="line">                            map.put(entry.getKey(), entry.getValue() - <span class="hljs-number">1</span>);</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                } <span class="hljs-keyword">else</span> {</span><br><span class="line">                    map.put(num, <span class="hljs-number">1</span>);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// find the one that have highest value(count), that key should be the majority number</span></span><br><span class="line">        <span class="hljs-keyword">int</span> value = <span class="hljs-number">0</span>;</span><br><span class="line">        <span class="hljs-keyword">int</span> result = -<span class="hljs-number">1</span>;</span><br><span class="line">        <span class="hljs-keyword">for</span>(Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) {</span><br><span class="line">            <span class="hljs-keyword">if</span>(entry.getValue() &gt; value) {</span><br><span class="line">                value = entry.getValue();</span><br><span class="line">                result = entry.getKey();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span> result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ul></body></html>
        <p class="article-more-link">
            <a href="/2015/02/08/InterviewNote8Questions/#more">Read More</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2015/02/01/InterviewNote7DataStructure/" itemprop="url">Interview Note - Data Structure</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2015-02-02T04:27:19.000Z" itemprop="datePublished">Feb 1 2015</time>
                <span class="second-date-block"> (Feb 1 2015)</span>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/English/">English</a><span>></span><a class="article-category-link" href="/categories/English/Interview/">Interview</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            7 minutes read (About 1038 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p><strong>Data Structure</strong> is a way to organize data. It provides some methods to handle data stream, e.g. insert, delete, etc.</p>
<h3 id="Linear-Data-Structure"><a href="#Linear-Data-Structure" class="headerlink" title="Linear Data Structure"></a>Linear Data Structure</h3><h4 id="Queue-amp-Stack"><a href="#Queue-amp-Stack" class="headerlink" title="Queue &amp; Stack"></a>Queue &amp; Stack</h4><p><a target="_blank" rel="noopener" href="http://lintcode.com/problem/min-stack">Min Stack</a><br>Use two stacks, one is storing the input, when calling <code>pop()</code> or <code>peek()</code>, pop from another stack, which stores the minimum values from top to bottom.</p>
<figure class="highlight java hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span> </span>{</span><br><span class="line">    ArrayList&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    ArrayList&lt;Integer&gt; minStack = <span class="hljs-keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>{</span><br><span class="line">        stack.add(x);</span><br><span class="line">        <span class="hljs-keyword">if</span>(minStack.isEmpty() || minStack.get(minStack.size() - <span class="hljs-number">1</span>) &gt;= x) {</span><br><span class="line">            minStack.add(x);</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>{</span><br><span class="line">        <span class="hljs-keyword">if</span>(stack.isEmpty()) {</span><br><span class="line">            <span class="hljs-keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">int</span> elem = stack.remove(stack.size() - <span class="hljs-number">1</span>);</span><br><span class="line">        <span class="hljs-keyword">if</span>(!minStack.isEmpty() &amp;&amp; minStack.get(minStack.size() - <span class="hljs-number">1</span>) == elem) {</span><br><span class="line">            minStack.remove(minStack.size() - <span class="hljs-number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">top</span><span class="hljs-params">()</span> </span>{</span><br><span class="line">        <span class="hljs-keyword">if</span>(!stack.isEmpty()) {</span><br><span class="line">            <span class="hljs-keyword">return</span> stack.get(stack.size() - <span class="hljs-number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getMin</span><span class="hljs-params">()</span> </span>{</span><br><span class="line">        <span class="hljs-keyword">if</span>(!minStack.isEmpty()) {</span><br><span class="line">            <span class="hljs-keyword">return</span> minStack.get(minStack.size() - <span class="hljs-number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><a target="_blank" rel="noopener" href="http://lintcode.com/en/problem/implement-queue-by-stacks/">Implement Queue by stacks</a><br>Use two stacks, one is for storing elements. When calling <code>pop()</code> or <code>top()</code>, pop the elements from the first stack and push them into the second one.</p>
<figure class="highlight java hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>{</span><br><span class="line">    <span class="hljs-keyword">private</span> Stack&lt;Integer&gt; stack1;</span><br><span class="line">    <span class="hljs-keyword">private</span> Stack&lt;Integer&gt; stack2;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Solution</span><span class="hljs-params">()</span> </span>{</span><br><span class="line">       <span class="hljs-comment">// do initialization</span></span><br><span class="line">       stack1 = <span class="hljs-keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">       stack2 = <span class="hljs-keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> element)</span> </span>{</span><br><span class="line">        stack1.push(element);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>{</span><br><span class="line">        <span class="hljs-keyword">if</span>(stack2.isEmpty()) {</span><br><span class="line">            <span class="hljs-keyword">while</span>(!stack1.isEmpty()) {</span><br><span class="line">                stack2.push(stack1.pop());</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span> stack2.pop();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">top</span><span class="hljs-params">()</span> </span>{</span><br><span class="line">        <span class="hljs-keyword">if</span>(stack2.isEmpty()) {</span><br><span class="line">            <span class="hljs-keyword">while</span>(!stack1.isEmpty()) {</span><br><span class="line">                stack2.push(stack1.pop());</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="hljs-keyword">return</span> stack2.peek();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><a target="_blank" rel="noopener" href="http://lintcode.com/problem/largest-rectangle-in-histogram">Largest Rectangle in Histogram</a><br>Brute force: totally <code>O(n^2)</code> windows and <code>O(n)</code> to find the minimun one in each window, so we need <code>O(n^3)</code> time.<br>Improve: for each number, search both side of it until find two smaller number, calculate the result, <code>O(n^2)</code> cost.<br>Best: use a stack to store the <strong>index</strong> (all increased heights), when faced with a smaller one, pop out from tha stack and calculate the area until the value bigger than the peek() one. This method cost <code>O(n)</code> time, with <code>O(n)</code> space in worst case (two passes).</p></body></html>
        <p class="article-more-link">
            <a href="/2015/02/01/InterviewNote7DataStructure/#more">Read More</a>
        </p>
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous">
        <a href="/">Prev</a>
    </div>
    <div class="pagination-next">
        <a href="/page/3/">Next</a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link" href="/">1</a></li>
        
        <li><a class="pagination-link is-current" href="/page/2/">2</a></li>
        
        <li><a class="pagination-link" href="/page/3/">3</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/15/">15</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2021 Chen Zhang&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>